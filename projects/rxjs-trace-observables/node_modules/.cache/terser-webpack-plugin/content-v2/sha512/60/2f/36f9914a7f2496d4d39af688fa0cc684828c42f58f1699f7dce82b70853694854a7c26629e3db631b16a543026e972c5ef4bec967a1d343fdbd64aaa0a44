{"code":"!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"TraceObservablePipes\",[],e):\"object\"==typeof exports?exports.TraceObservablePipes=e():t.TraceObservablePipes=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=5)}([function(t,e,r){\"use strict\";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(2),a=r(2),i=r(6),c=r(7),u=r(8),s=r(1);e.origRxJsOperators=n({},i);var f=n({},o);e.traceObservablePipes=function(){var t=a.Observable.prototype.lift;for(var r in a.Observable.prototype.lift=function(e){var r=t.call(this,e);return r.__stack__=this.__stack__,r},i)\"function\"==typeof i[r]&&\"switchMap\"!==r&&Object.defineProperty(i,r,{value:u.traceableOperatorFactory(e.origRxJsOperators[r],r)});Object.defineProperty(i,\"switchMap\",{value:function(t,r){var n=new s.StackData(\"switchMap\");return function(o){var i=(o.__stack__||[]).concat([n]);o.__stack__=i;var c=i.length,u=0,s=t;return t=function(t,e){var r,n=s(t,e);return console.log({newObsStack:n.__stack__}),(r=o.__stack__).splice.apply(r,[c,u].concat(n.__stack__||[])),u=n.__stack__&&n.__stack__.length||0,n},o.pipe(e.origRxJsOperators.switchMap(t,r),e.origRxJsOperators.catchError(function(t,e){return a.throwError(t)}))}}});for(var n=0,d=[\"zip\",\"combineLatest\",\"forkJoin\"];n<d.length;n++)\"function\"==typeof o[r=d[n]]&&Object.defineProperty(o,r,{value:c.traceableCombinationOperatorFactory(f[r],r)})},e.hashString=function(t){var e,r=0;if(0===t.length)return r;for(e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return r}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(0),o=function(){function t(t,e){void 0===e&&(e=void 0),this.name=t,this.value=e,this.call=(new Error).stack.split(\"\\n\")[3]}return t.prototype.getHash=function(){return n.hashString(this.call)},t}();e.StackData=o},function(t,e){t.exports=require(\"rxjs\")},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(4),o=function(){function t(t){void 0===t&&(t=!0),this.directed=t,this.nodes=[],this.adjacencyList={}}return t.prototype.getNode=function(t){return\"number\"==typeof t?this.nodes.find(function(e){return e.id===t}):this.nodes.find(function(e){return e.id===t.getHash()})},t.prototype.addNode=function(t){var e=this.nodes.find(function(e){return e.id===t.getHash()});if(e)return e;var r=new n.Node(t);return this.nodes.push(r),r},t.prototype.addEdge=function(t,e){this.adjacencyList.hasOwnProperty(t.id)||(this.adjacencyList[t.id]=[]),this.adjacencyList[t.id].indexOf(e.id)<0&&this.adjacencyList[t.id].push(e.id),this.directed||(this.adjacencyList.hasOwnProperty(e.id)||(this.adjacencyList[e.id]=[]),this.adjacencyList[e.id].indexOf(t.id)<0&&this.adjacencyList[e.id].push(t.id))},t}();e.Graph=o,e.getGraphFromStack=function(t){var e=new o;return function t(e,r,n){if(void 0===n&&(n=[]),Array.isArray(r)){for(var o=n,a=function(r){if(Array.isArray(r)){for(var n=[],a=0,i=r;a<i.length;a++){var c=i[a];n.push.apply(n,t(e,c,o))}o=n}else{var u=e.addNode(r);o.forEach(function(t){return e.addEdge(t,u)}),o=[u]}},i=0,c=r;i<c.length;i++)a(c[i]);return o}var u=e.addNode(r);return n.forEach(function(t){return e.addEdge(t,u)}),[u]}(e,t),e}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=function(){function t(t){this.data=t,this.id=t.getHash()}return t.prototype.toString=function(){return\"id: \"+this.id+\", data: \"+JSON.stringify(this.data)},t.nextNodeId=0,t}();e.Node=n},function(t,e,r){\"use strict\";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,\"__esModule\",{value:!0}),n(r(3)),n(r(4)),n(r(1)),n(r(9)),n(r(0))},function(t,e){t.exports=require(\"rxjs/operators\")},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(0),o=r(1);e.traceableCombinationOperatorFactory=function(t,e){return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];1===r.length&&Array.isArray(r[0])&&(r=r[0]);var i=t(r),c=new o.StackData(e);return i.__stack__=[r.filter(function(t){return t.__stack__}).map(function(t){return t.__stack__}),c],i.pipe(n.origRxJsOperators.tap(function(t){return c.value=t}))}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(2),o=r(0),a=r(1);e.traceableOperatorFactory=function(t,e){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var c=new a.StackData(e);return function(e){return e.__stack__=(e.__stack__||[]).concat([c]),e.pipe(o.origRxJsOperators.tap(function(t){return c.value=t}),t.apply(void 0,r),o.origRxJsOperators.catchError(function(t,e){return n.throwError(t)}))}}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(3),o=r(0);e.trace=function(){return function(t){return t.pipe(o.origRxJsOperators.tap(function(e){var r=t.__stack__,o=n.getGraphFromStack(r);console.log(\"Tracing observable. Current value: \"+e+\"\\n\\n\\n\"+Object.keys(o.adjacencyList).flatMap(function(t){return o.adjacencyList[+t].map(function(e){return o.getNode(+t).data.name+\" -> \"+o.getNode(+e).data.name})}).join(\"\\n\")+\"\\n\\n\"+o.nodes.map(function(t){return t.data.name+\": \"+t.data}).join(\"\\n\")+\" \\n\");var a={type:\"graph\",content:o};setTimeout(function(){return window.postMessage(a,\"*\")},0)}))}}}])});","extractedComments":[]}